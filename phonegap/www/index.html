<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <link rel="stylesheet" href="css/jquery.mobile.css">
    <link rel="stylesheet" href="css/index.css">
    <script src="js/libs/require.js" data-main="js/mobile"></script>
    <title>Hello World</title>
  </head>
    <script type="text/template" id="header">
      <div data-role="header" class='div_header' data-position='fixed'>
        <div data-role="navbar" class="ui-btn-active ui-state-persist">    
          <ul>
            <li><a class='home' href="#">我的书架</a></li>
            <li><a class='category' href="#category">更多小说</a></li>
          </ul>
        </div>
      </div>
    </script>

    <script type="text/template" id="category">
      <%= $("#header").html() %>
      <div role="main" class="ui-content">
        <ul class='category'  data-dom-cache="false" id="category_test"  data-role="listview" data-count-theme="b" data-inset="true">
        </ul>
      </div>
    </script>

    <script type="text/template" id="chapters">
      <%= $("#header").html() %>
      <div role="main" class="ui-content">
        <div class='chapter_header'>
          <h2 class='chapter_name'>
          <%= collection[0].name %>
          </h2>
        </div>
        <div class='chapter_content' data-parent-id="<%=collection[0].parent_id%>" data-next-id="<%= collection[0].next_id %>">
          <%= collection[0].content %>
        </div>
      </div>
    </script>
    
    <script type="text/template" id="books">
    <div data-role="header">
      <h1 id="category_name">category_name</h1>
      <a href="#" data-role="button" data-icon="home" data-iconpos="notext" data-theme="a" data-inline="true">Home</a>
    </div>
      <div role="main" class="ui-content">
        <ul class='category'  data-dom-cache="false" id="category_test"   data-role="listview" data-count-theme="b" data-inset="true">
        </ul>
        <a id="more_books" data-role="button">加载更多</a>
      </div>
    </script>

    <script type="text/template" id="home">
      <%= $("#header").html() %>
      <div data-role="content">
        <h3>this is Home</h3>
      </div>
    </script>

    <script id="BookItems" type="text/template">
      <% _.each(collection.toJSON(), function( book, id ) { %>
        <li class="ui-li-has-thumb">
          <a href="#chapters?chapter_id=<%=book.chapter_id%>">
            <img src='img/demo.jpg'>
            <span><%= book.name %></span>
            <p>作者: <%=book.author %></p>
            <p>总共: <%=book.chapters_count %>章</p>
          </a>
        </li>
      <% }); %>
    </script>

    <script id="categoryItems" type="text/template">
      <% _.each(collection.toJSON(), function( category, id ) { %>
        <li>
          <a href="#books?cid=<%= category.id %>">
            <img src='img/demo.jpg'>
            <p><%= category.name %></p>
          </a>
        </li>
      <% }); %>
    </script>
  <body>
  </body>
</html>
